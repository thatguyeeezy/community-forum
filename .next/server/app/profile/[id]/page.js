(()=>{var e={};e.id=870,e.ids=[870],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},66541:e=>{"use strict";e.exports=require("@prisma/client/runtime/library")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},75686:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var t=s(70260),a=s(28203),i=s(25155),n=s.n(i),d=s(67292),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);s.d(r,o);let l=["",{children:["profile",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,25038)),"C:\\xampp\\nodejs-apps\\community-forum\\app\\profile\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,78237)),"C:\\xampp\\nodejs-apps\\community-forum\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\xampp\\nodejs-apps\\community-forum\\app\\profile\\[id]\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/profile/[id]/page",pathname:"/profile/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},23782:(e,r,s)=>{"use strict";s.r(r),s.d(r,{"404c4ea980e6068e9e16a5d45a4c3ffd73c6fffd69":()=>o,"408fde7620429fad8e40977c986977959008d05a27":()=>d});var t=s(21590);s(70376);var a=s(40492),i=s(47735),n=s(94942);async function d(e){let r=await (0,n.j)();if(!r?.user)return{error:"You must be logged in to update your profile"};let s=e.get("name"),t=e.get("bio"),d=e.get("rank"),o=e.get("department"),l=e.get("discordId");if(!s)return{error:"Name is required"};try{let e="string"==typeof r.user.id?parseInt(r.user.id,10):r.user.id;return console.log("Updating profile for user:",e,{name:s,bio:t||"",rank:d||null,department:o||"N_A",discordId:l||null}),await a.z.user.update({where:{id:e},data:{name:s,bio:t||"",rank:d||null,department:o||"N_A"}}),(0,i.revalidatePath)(`/profile/${e}`),(0,i.revalidatePath)(`/members/${e}`),{success:!0,message:"Profile updated successfully"}}catch(e){return console.error("Profile update error:",e),{error:"Failed to update profile"}}}async function o(e){let r=await (0,n.j)();if(!r?.user)return{error:"You must be logged in to follow users"};if(r.user.id===e)return{error:"You cannot follow yourself"};try{let s="string"==typeof r.user.id?parseInt(r.user.id,10):r.user.id,t=parseInt(e,10),n=await a.z.follow.findFirst({where:{followerId:s,followingId:t}});if(n)return await a.z.follow.delete({where:{id:n.id}}),(0,i.revalidatePath)(`/members/${e}`),{success:!0,followed:!1,message:"User unfollowed"};return await a.z.follow.create({data:{followerId:s,followingId:t}}),await a.z.notification.create({data:{type:"follow",message:`${r.user.name} started following you`,recipientId:t,link:`/members/${s}`}}),(0,i.revalidatePath)(`/members/${e}`),{success:!0,followed:!0,message:"User followed"}}catch(e){return console.error("Follow error:",e),{error:"Failed to follow/unfollow user"}}}(0,s(99344).D)([d,o]),(0,t.A)(d,"408fde7620429fad8e40977c986977959008d05a27",null),(0,t.A)(o,"404c4ea980e6068e9e16a5d45a4c3ffd73c6fffd69",null)},78032:(e,r,s)=>{Promise.resolve().then(s.bind(s,25038))},87760:(e,r,s)=>{Promise.resolve().then(s.bind(s,65987))},65987:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>C});var t=s(45512),a=s(90993),i=s(79334),n=s(58009),d=s(81846),o=s(87021),l=s(97643),c=s(29637),u=s(77252),m=s(41680);let p=(0,m.A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=s(64977);let h=(0,m.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var f=s(59462);function g({className:e,...r}){return(0,t.jsx)("div",{className:(0,f.cn)("animate-pulse rounded-md bg-muted",e),...r})}var b=s(71965),j=s(25409),v=s(53261),w=s(48859),y=s(26248);let N=(0,y.createServerReference)("408fde7620429fad8e40977c986977959008d05a27",y.callServer,void 0,y.findSourceMapURL,"updateProfile");var I=s(70801);function A({open:e,onOpenChange:r,defaultValues:s}){let[d,l]=(0,n.useState)(""),[c,u]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[y,A]=(0,n.useState)(!1),[D,k]=(0,n.useState)(null),C=(0,i.useRouter)(),{data:T,update:R}=(0,a.useSession)(),{toast:S}=(0,I.dj)(),P=async e=>{if(e.preventDefault(),A(!0),k(null),!d.trim()){k("Name is required"),A(!1);return}let s=new FormData;s.append("name",d),s.append("bio",c),s.append("rank",m),s.append("department",x),s.append("discordId",f),console.log("Submitting form data:",{name:d,bio:c,rank:m,department:x,discordId:f});let t=await N(s);t.success?(T&&await R({name:d}),S({title:"Profile updated",description:"Your profile has been updated successfully."}),r(!1),C.refresh()):(k(t.error||"Failed to update profile"),S({title:"Error",description:t.error||"Failed to update profile",variant:"destructive"})),A(!1)};return(0,t.jsx)(b.lG,{open:e,onOpenChange:r,children:(0,t.jsxs)(b.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(b.c7,{children:[(0,t.jsx)(b.L3,{children:"Edit Profile"}),(0,t.jsx)(b.rr,{children:"Update your profile information. Click save when you're done."})]}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"name",children:"Display Name"}),(0,t.jsx)(j.p,{id:"name",value:d,onChange:e=>l(e.target.value),placeholder:"Your display name",className:D&&!d.trim()?"border-red-500":""}),D&&!d.trim()&&(0,t.jsx)("p",{className:"text-sm text-red-500",children:"Name is required"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"rank",children:"Rank"}),(0,t.jsx)(j.p,{id:"rank",value:m,onChange:e=>p(e.target.value),placeholder:"Your rank",maxLength:30}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[m.length,"/30 characters"]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"department",children:"Primary Department"}),(0,t.jsx)(j.p,{id:"department",value:"N_A"===x?"N/A":x,readOnly:!0,className:"bg-muted"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Department can only be changed by staff members in the Staff Panel"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"discordId",children:"Discord ID"}),(0,t.jsx)(j.p,{id:"discordId",value:f,onChange:e=>g(e.target.value),placeholder:"Your Discord ID",readOnly:!0,className:"bg-muted"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Discord ID is automatically set when you sign in with Discord"})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(v.Label,{htmlFor:"bio",children:"Bio"}),(0,t.jsx)(w.T,{id:"bio",value:c,onChange:e=>u(e.target.value),placeholder:"Tell us about yourself",rows:5,maxLength:500}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[c.length,"/500 characters"]})]})]}),D&&"Name is required"!==D&&(0,t.jsx)("p",{className:"text-sm text-red-500 mb-4",children:D}),(0,t.jsxs)(b.Es,{children:[(0,t.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsx)(o.$,{type:"submit",disabled:y,children:y?"Saving...":"Save changes"})]})]})]})})}function D(e){if(!e)return"Recently";let r=new Date(e),s=Math.floor((new Date().getTime()-r.getTime())/6e4),t=Math.floor(s/60),a=Math.floor(t/24);return s<1?"Just now":s<60?`${s} minute${1!==s?"s":""} ago`:t<24?`${t} hour${1!==t?"s":""} ago`:a<7?`${a} day${1!==a?"s":""} ago`:r.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}let k={HEAD_ADMIN:{label:"Head Administration",color:"bg-cyan-500 text-white hover:bg-cyan-600"},SENIOR_ADMIN:{label:"Senior Administration",color:"bg-purple-500 text-white hover:bg-purple-600"},ADMIN:{label:"Administration",color:"bg-red-800 text-white hover:bg-red-900"},JUNIOR_ADMIN:{label:"Junior Administration",color:"bg-blue-800 text-white hover:bg-blue-900"},SENIOR_STAFF:{label:"Senior Staff",color:"bg-green-800 text-white hover:bg-green-900"},STAFF:{label:"Staff",color:"bg-yellow-500 text-black hover:bg-yellow-600"},STAFF_IN_TRAINING:{label:"Staff In Training",color:"bg-red-400 text-white hover:bg-red-500"},MEMBER:{label:"Member",color:"bg-blue-400 text-white hover:bg-blue-500"},APPLICANT:{label:"Applicant",color:"bg-gray-400 text-white hover:bg-gray-500"}};function C(){let{id:e}=(0,i.useParams)(),{data:r,status:s}=(0,a.useSession)(),m=(0,i.useRouter)(),[b,j]=(0,n.useState)(null),[v,w]=(0,n.useState)(null),[y,N]=(0,n.useState)(!0),[I,C]=(0,n.useState)(!1),[T,R]=(0,n.useState)(""),S=r?.user?.id===Number(e);if(y)return(0,t.jsxs)("div",{className:"container mx-auto py-6 px-4 md:px-6",children:[(0,t.jsx)(l.Zp,{className:"mb-6",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[(0,t.jsx)(g,{className:"h-24 w-24 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1 space-y-2 text-center md:text-left",children:[(0,t.jsx)(g,{className:"h-8 w-[200px] mx-auto md:mx-0"}),(0,t.jsx)(g,{className:"h-4 w-[150px] mx-auto md:mx-0"}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:[(0,t.jsx)(g,{className:"h-5 w-[80px]"}),(0,t.jsx)(g,{className:"h-5 w-[120px]"})]}),(0,t.jsx)(g,{className:"h-4 w-full"})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(g,{className:"h-10 w-[100px]"}),(0,t.jsx)(g,{className:"h-10 w-[100px]"})]})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"md:col-span-1",children:(0,t.jsx)(g,{className:"h-[300px] w-full"})}),(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsx)(g,{className:"h-[400px] w-full"})})]})]});if(T)return(0,t.jsx)("div",{className:"container max-w-4xl py-10",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"pb-4",children:[(0,t.jsx)(l.ZB,{children:"Error"}),(0,t.jsx)(l.BT,{children:T})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(o.$,{onClick:()=>m.push("/"),children:"Return to Home"})})]})});if(!b)return(0,t.jsx)("div",{className:"container max-w-4xl py-10",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"pb-4",children:[(0,t.jsx)(l.ZB,{children:"Profile Not Found"}),(0,t.jsx)(l.BT,{children:"This user profile does not exist."})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)(o.$,{onClick:()=>m.push("/"),children:"Return to Home"})})]})});let P=b.name?.toLowerCase().replace(/\s+/g,"")||`user${b.id}`,F=k[b.role]||{label:"Unknown Role",color:"bg-gray-400 text-white hover:bg-gray-500"},E=new Date("2025-04-30T23:59:59"),_=b.createdAt&&new Date(b.createdAt)<E,q=v?.joinedAt||b.createdAt;return v?.joinedAt,(0,t.jsxs)("div",{className:"container mx-auto py-6 px-4 md:px-6",children:[(0,t.jsx)(l.Zp,{className:"mb-6",children:(0,t.jsx)(l.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-6 items-center md:items-start",children:[(0,t.jsxs)(d.Avatar,{className:"h-24 w-24 border-4 border-background",children:[(0,t.jsx)(d.AvatarImage,{src:b.image||"/placeholder.svg",alt:P}),(0,t.jsx)(d.AvatarFallback,{children:b.name?.substring(0,2).toUpperCase()||"U"})]}),(0,t.jsxs)("div",{className:"flex-1 space-y-2 text-center md:text-left",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:b.name}),(0,t.jsx)("p",{className:"text-muted-foreground",children:b.discordId?`@${b.discordId}`:`@${P}`})]}),(0,t.jsxs)("div",{className:"flex flex-wrap justify-center md:justify-start gap-2",children:[(0,t.jsx)("span",{className:(0,f.cn)("px-2.5 py-0.5 rounded-full text-xs font-semibold transition-colors",F.color),children:F.label}),(0,t.jsxs)(u.E,{variant:"outline",children:["Joined ",new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"long"})]}),(0,t.jsxs)(u.E,{variant:"outline",children:["Last active ",D(b.lastActive)]})]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:b.bio})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:S?(0,t.jsxs)(o.$,{onClick:()=>C(!0),children:[(0,t.jsx)(p,{className:"mr-2 h-4 w-4"}),"Edit Profile"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.$,{children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Follow"]}),(0,t.jsxs)(o.$,{variant:"outline",children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Message"]})]})})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"md:col-span-1 space-y-6",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Information"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Rank"}),(0,t.jsx)("span",{className:"font-medium text-right break-words max-w-[60%]",children:b.rank||"Not set"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Department"}),(0,t.jsx)("span",{className:"font-medium text-right break-words max-w-[60%]",children:"N_A"===b.department?"N/A":b.department})]}),b.rnrStatus&&"NONE"!==b.rnrStatus&&(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"R&R Status"}),(0,t.jsx)("span",{className:"font-medium text-right break-words max-w-[60%]",children:b.rnrStatus.replace("RNR_","").replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Discord Join"}),(0,t.jsx)("span",{className:"font-medium text-right break-words max-w-[60%]",children:v?.joinedAt?new Date(v.joinedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not in server"})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsx)(l.ZB,{children:"Stats"})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Threads"}),(0,t.jsx)("span",{className:"font-medium",children:b.threadCount||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Posts"}),(0,t.jsx)("span",{className:"font-medium",children:b.postCount||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Followers"}),(0,t.jsx)("span",{className:"font-medium",children:b.followers||0})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Following"}),(0,t.jsx)("span",{className:"font-medium",children:b.following||0})]})]})]}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Badges"}),(0,t.jsx)(l.BT,{children:"Achievements earned"})]}),(0,t.jsx)(l.Wu,{children:(()=>{let e=[];return(_&&e.push((0,t.jsx)("div",{className:"inline-block px-2.5 py-0.5 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200 dark:bg-yellow-900 dark:text-yellow-300 dark:border-yellow-800",children:"Early Adopter"},"early-adopter")),b.postCount&&b.postCount>50&&e.push((0,t.jsx)("div",{className:"inline-block px-2.5 py-0.5 rounded-md text-xs font-medium bg-green-100 text-green-800 border border-green-200 dark:bg-green-900 dark:text-green-300 dark:border-green-800",children:"Helpful"},"helpful")),b.threadCount&&b.threadCount>20&&e.push((0,t.jsx)("div",{className:"inline-block px-2.5 py-0.5 rounded-md text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 dark:bg-blue-900 dark:text-blue-300 dark:border-blue-800",children:"Top Contributor"},"contributor")),0===e.length)?(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet"}):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e})})()})]})]}),(0,t.jsx)("div",{className:"md:col-span-3",children:(0,t.jsxs)(c.Tabs,{defaultValue:"threads",className:"space-y-4",children:[(0,t.jsxs)(c.TabsList,{children:[(0,t.jsx)(c.TabsTrigger,{value:"threads",children:"Threads"}),(0,t.jsx)(c.TabsTrigger,{value:"posts",children:"Posts"}),(0,t.jsx)(c.TabsTrigger,{value:"activity",children:"Activity"}),(0,t.jsx)(c.TabsTrigger,{value:"about",children:"About"})]}),(0,t.jsx)(c.TabsContent,{value:"threads",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Recent Threads"}),(0,t.jsxs)(l.BT,{children:["Threads started by ",b.name]})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Recent threads will be displayed here"})})]})}),(0,t.jsx)(c.TabsContent,{value:"posts",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Recent Posts"}),(0,t.jsxs)(l.BT,{children:["Posts written by ",b.name]})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Recent posts will be displayed here"})})]})}),(0,t.jsx)(c.TabsContent,{value:"activity",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{children:[(0,t.jsx)(l.ZB,{children:"Recent Activity"}),(0,t.jsxs)(l.BT,{children:[b.name,"'s recent activity"]})]}),(0,t.jsx)(l.Wu,{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Recent activity will be displayed here"})})]})}),(0,t.jsx)(c.TabsContent,{value:"about",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{children:(0,t.jsxs)(l.ZB,{children:["About ",b.name]})}),(0,t.jsxs)(l.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"Bio"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:b.bio||"No bio provided."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"Member Since"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium",children:"Last Active"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:D(b.lastActive)})]})]})]})})]})})]}),S&&(0,t.jsx)(A,{open:I,onOpenChange:C,defaultValues:{name:b.name||"",bio:b.bio||"",rank:b.rank||"",department:b.department||"",discordId:b.discordId||""}})]})}},77252:(e,r,s)=>{"use strict";s.d(r,{E:()=>d});var t=s(45512);s(58009);var a=s(21643),i=s(59462);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:r,...s}){return(0,t.jsx)("div",{className:(0,i.cn)(n({variant:r}),e),...s})}},97643:(e,r,s)=>{"use strict";s.d(r,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>u});var t=s(45512),a=s(58009),i=s(59462);let n=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));n.displayName="Card";let d=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...r}));d.displayName="CardHeader";let o=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));o.displayName="CardTitle";let l=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},53261:(e,r,s)=>{"use strict";s.d(r,{Label:()=>c});var t=s(45512),a=s(58009),i=s(30830),n=a.forwardRef((e,r)=>(0,t.jsx)(i.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));n.displayName="Label";var d=s(21643),o=s(59462);let l=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(n,{ref:s,className:(0,o.cn)(l(),e),...r}));c.displayName=n.displayName},29637:(e,r,s)=>{"use strict";s.d(r,{Tabs:()=>T,TabsContent:()=>P,TabsList:()=>R,TabsTrigger:()=>S});var t=s(45512),a=s(58009),i=s(31412),n=s(6004),d=s(48305),o=s(98060),l=s(30830),c=s(59018),u=s(13024),m=s(30096),p="Tabs",[x,h]=(0,n.A)(p,[d.RG]),f=(0,d.RG)(),[g,b]=x(p),j=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:a,onValueChange:i,defaultValue:n,orientation:d="horizontal",dir:o,activationMode:p="automatic",...x}=e,h=(0,c.jH)(o),[f,b]=(0,u.i)({prop:a,onChange:i,defaultProp:n});return(0,t.jsx)(g,{scope:s,baseId:(0,m.B)(),value:f,onValueChange:b,orientation:d,dir:h,activationMode:p,children:(0,t.jsx)(l.sG.div,{dir:h,"data-orientation":d,...x,ref:r})})});j.displayName=p;var v="TabsList",w=a.forwardRef((e,r)=>{let{__scopeTabs:s,loop:a=!0,...i}=e,n=b(v,s),o=f(s);return(0,t.jsx)(d.bL,{asChild:!0,...o,orientation:n.orientation,dir:n.dir,loop:a,children:(0,t.jsx)(l.sG.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:r})})});w.displayName=v;var y="TabsTrigger",N=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:a,disabled:n=!1,...o}=e,c=b(y,s),u=f(s),m=D(c.baseId,a),p=k(c.baseId,a),x=a===c.value;return(0,t.jsx)(d.q7,{asChild:!0,...u,focusable:!n,active:x,children:(0,t.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...o,ref:r,onMouseDown:(0,i.m)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(a)}),onKeyDown:(0,i.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(a)}),onFocus:(0,i.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;x||n||!e||c.onValueChange(a)})})})});N.displayName=y;var I="TabsContent",A=a.forwardRef((e,r)=>{let{__scopeTabs:s,value:i,forceMount:n,children:d,...c}=e,u=b(I,s),m=D(u.baseId,i),p=k(u.baseId,i),x=i===u.value,h=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(o.C,{present:n||x,children:({present:s})=>(0,t.jsx)(l.sG.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":m,hidden:!s,id:p,tabIndex:0,...c,ref:r,style:{...e.style,animationDuration:h.current?"0s":void 0},children:s&&d})})});function D(e,r){return`${e}-trigger-${r}`}function k(e,r){return`${e}-content-${r}`}A.displayName=I;var C=s(59462);let T=j,R=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(w,{ref:s,className:(0,C.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...r}));R.displayName=w.displayName;let S=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(N,{ref:s,className:(0,C.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...r}));S.displayName=N.displayName;let P=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)(A,{ref:s,className:(0,C.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r}));P.displayName=A.displayName},48859:(e,r,s)=>{"use strict";s.d(r,{T:()=>n});var t=s(45512),a=s(58009),i=s(59462);let n=a.forwardRef(({className:e,...r},s)=>(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));n.displayName="Textarea"},25038:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\nodejs-apps\\\\community-forum\\\\app\\\\profile\\\\[id]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\nodejs-apps\\community-forum\\app\\profile\\[id]\\page.tsx","default")},94942:(e,r,s)=>{"use strict";s.d(r,{N:()=>l,j:()=>c});var t=s(37067),a=s(10267),i=s(24118),n=s(24871),d=s(80225),o=s(40492);let l={adapter:(0,t.y)(o.z),pages:{signIn:"/auth/signin",signOut:"/auth/signout",error:"/auth/error"},session:{strategy:"jwt"},providers:[(0,d.A)({clientId:process.env.DISCORD_CLIENT_ID||"",clientSecret:process.env.DISCORD_CLIENT_SECRET||"",authorization:{params:{scope:"identify email"}},callbackUrl:"http://198.154.99.127:3000/auth/discord/callback",profile:e=>(console.log("Discord profile received:",e),{id:e.id,name:e.username,email:e.email,image:e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.png`:null})}),(0,n.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let r=await o.z.user.findUnique({where:{email:e.email}});return r&&r.password&&await (0,a.UD)(e.password,r.password)?{id:r.id,email:r.email,name:r.name,image:r.image,role:r.role}:null}})],callbacks:{async signIn({user:e,account:r,profile:s}){if(r?.provider==="discord"&&s)try{console.log("Discord sign-in for user ID:",e.id),await o.z.user.update({where:{id:Number.parseInt(e.id,10)},data:{discordId:s.id,department:"N_A"}}),console.log("Updated user with Discord ID from profile:",s.id),setTimeout(async()=>{try{let r=await o.z.account.findFirst({where:{provider:"discord",userId:Number.parseInt(e.id,10)}});r&&(console.log("Found Discord account in accounts table:",r.providerAccountId),await o.z.user.update({where:{id:Number.parseInt(e.id,10)},data:{discordId:r.providerAccountId}}),console.log("Updated user with Discord ID from accounts table"))}catch(e){console.error("Error in delayed Discord ID update:",e)}},2e3)}catch(e){console.error("Error updating Discord ID during sign-in:",e)}return!0},async session({session:e,token:r}){if(e.user&&r.sub){e.user.id=r.sub,e.user.role=r.role,r.discordId&&(e.user.discordId=r.discordId);try{let s=Number.parseInt(r.sub,10),t=await o.z.user.findUnique({where:{id:s},select:{discordId:!0,department:!0,role:!0}});if(t&&(t.discordId&&(e.user.discordId=t.discordId),e.user.department=t.department,e.user.role=t.role,console.log("Session updated with user data:",{discordId:t.discordId,department:t.department,role:t.role}),!t.discordId)){let r=await o.z.account.findFirst({where:{provider:"discord",userId:s}});r&&(console.log("Found Discord account but user doesn't have Discord ID. Updating..."),await o.z.user.update({where:{id:s},data:{discordId:r.providerAccountId}}),e.user.discordId=r.providerAccountId,console.log("Updated user and session with Discord ID from accounts table"))}}catch(e){console.error("Error fetching user data for session:",e)}}return e},jwt:async({token:e,user:r,account:s,profile:t})=>(s&&r&&("discord"===s.provider&&t&&(e.discordId=t.id,console.log("Added Discord ID to JWT token:",t.id)),e.role=r.role),e)},events:{async createUser(e){let{user:r}=e;if(console.log("New user created:",r.id,r.email),r.email)try{setTimeout(async()=>{try{let e=await o.z.account.findFirst({where:{userId:r.id,provider:"discord"}});e&&(console.log("Found Discord account for new user:",e.providerAccountId),await o.z.user.update({where:{id:r.id},data:{discordId:e.providerAccountId,department:"N_A",role:"APPLICANT"}}),console.log("Updated new user with Discord ID and set as APPLICANT"))}catch(e){console.error("Error in delayed createUser processing:",e)}},2e3)}catch(e){console.error("Error in createUser event:",e)}},async linkAccount({user:e,account:r,profile:s}){if("discord"===r.provider&&s){console.log("Account linked:",e.id,r.provider,r.providerAccountId);try{await o.z.user.update({where:{id:e.id},data:{discordId:r.providerAccountId}}),console.log("Updated user with Discord ID from linkAccount event")}catch(e){console.error("Error updating Discord ID in linkAccount event:",e)}}}}};async function c(){return await (0,i.getServerSession)(l)}},40492:(e,r,s)=>{"use strict";s.d(r,{z:()=>a});var t=s(96330);let a=globalThis.prisma??new t.PrismaClient}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,423,212,45],()=>s(75686));module.exports=t})();