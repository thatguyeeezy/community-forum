(()=>{var e={};e.id=364,e.ids=[364],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},66541:e=>{"use strict";e.exports=require("@prisma/client/runtime/library")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},41942:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var s=t(70260),a=t(28203),n=t(25155),i=t.n(n),o=t(67292),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let l=["",{children:["forums",{children:["thread",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,23643)),"C:\\xampp\\nodejs-apps\\community-forum\\app\\forums\\thread\\[id]\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,78237)),"C:\\xampp\\nodejs-apps\\community-forum\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["C:\\xampp\\nodejs-apps\\community-forum\\app\\forums\\thread\\[id]\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/forums/thread/[id]/page",pathname:"/forums/thread/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},96227:(e,r,t)=>{Promise.resolve().then(t.bind(t,22994)),Promise.resolve().then(t.bind(t,11844)),Promise.resolve().then(t.t.bind(t,59607,23))},10299:(e,r,t)=>{Promise.resolve().then(t.bind(t,81846)),Promise.resolve().then(t.bind(t,71227)),Promise.resolve().then(t.t.bind(t,28531,23))},71227:(e,r,t)=>{"use strict";t.d(r,{Separator:()=>c});var s=t(45512),a=t(58009),n=t(30830),i="horizontal",o=["horizontal","vertical"],d=a.forwardRef((e,r)=>{let{decorative:t,orientation:a=i,...d}=e,l=o.includes(a)?a:i;return(0,s.jsx)(n.sG.div,{"data-orientation":l,...t?{role:"none"}:{"aria-orientation":"vertical"===l?l:void 0,role:"separator"},...d,ref:r})});d.displayName="Separator";var l=t(59462);let c=a.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...a},n)=>(0,s.jsx)(d,{ref:n,decorative:t,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...a}));c.displayName=d.displayName},23643:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>A});var s=t(62740),a=t(59607),n=t.n(a),i=t(31831),o=t(11587),d=t(51825),l=t(45369),c=t(98260),m=t(22994),u=t(38537);t(76301);var x=t(67699),p=t(55946);let h=(0,x.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:e,variant:r,...t}){return(0,s.jsx)("div",{className:(0,p.cn)(h({variant:r}),e),...t})}var v=t(19935),b=t(11844),j=t(12503),g=t(82520),N=t(83238);let y=(0,N.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),k=(0,N.A)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);var w=t(19626);async function A({params:e}){let r=await (0,d.getServerSession)(l.N);try{await o.z.thread.update({where:{id:e.id},data:{views:{increment:1}}})}catch(e){console.error("Error incrementing view count:",e)}let t=await o.z.thread.findUnique({where:{id:e.id},include:{author:!0,category:!0,posts:{include:{author:!0,reactions:!0},orderBy:{createdAt:"asc"}},reactions:{include:{user:!0}},_count:{select:{posts:!0}}}});t||(0,i.notFound)();let a=r?.user?.role==="ADMIN",x=r?.user?.role==="MODERATOR";return(0,s.jsxs)("div",{className:"container mx-auto py-6 px-4 md:px-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[(0,s.jsx)(n(),{href:"/forums",className:"hover:underline",children:"Forums"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)(n(),{href:`/forums/${t.category.id}`,className:"hover:underline",children:t.category.name})]}),(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(j.A,{className:"mr-1 h-4 w-4"}),(0,c.m)(new Date(t.createdAt),{addSuffix:!0})]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(g.A,{className:"mr-1 h-4 w-4"}),t._count.posts," replies"]}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(y,{className:"mr-1 h-4 w-4"}),t.views," views"]}),t.pinned&&(0,s.jsxs)(f,{variant:"secondary",className:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300",children:[(0,s.jsx)(k,{className:"mr-1 h-3 w-3"})," Pinned"]}),t.locked&&(0,s.jsxs)(f,{variant:"secondary",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[(0,s.jsx)(w.A,{className:"mr-1 h-3 w-3"})," Locked"]})]})]}),(a||x)&&(0,s.jsx)("div",{children:(0,s.jsx)(u.$,{variant:"outline",size:"sm",children:"Moderate"})})]}),(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{className:"flex flex-row items-start space-y-0",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsxs)(m.Avatar,{className:"h-10 w-10",children:[(0,s.jsx)(m.AvatarImage,{src:t.author.image||"/placeholder.svg",alt:t.author.name||""}),(0,s.jsx)(m.AvatarFallback,{children:t.author.name?.substring(0,2).toUpperCase()||"UN"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n(),{href:`/members/${t.author.id}`,className:"font-semibold hover:underline",children:t.author.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ADMIN"===t.author.role&&(0,s.jsx)(f,{className:"mr-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:"Admin"}),"MODERATOR"===t.author.role&&(0,s.jsx)(f,{className:"mr-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:"Mod"}),"Posted ",(0,c.m)(new Date(t.createdAt),{addSuffix:!0})]})]})]})}),(0,s.jsx)(v.Wu,{children:(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:t.content.split("\n").map((e,r)=>(0,s.jsx)("p",{children:e},r))})}),(0,s.jsxs)(v.wL,{className:"flex justify-between border-t p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"sm",children:"Like"}),(0,s.jsx)(u.$,{variant:"ghost",size:"sm",children:"Share"})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:t.reactions.length>0&&(0,s.jsxs)("span",{children:[t.reactions.length," likes"]})})]})]})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Replies (",t._count.posts,")"]}),(0,s.jsx)("div",{className:"space-y-4",children:t.posts.map(e=>(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.aR,{className:"flex flex-row items-start space-y-0",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsxs)(m.Avatar,{className:"h-10 w-10",children:[(0,s.jsx)(m.AvatarImage,{src:e.author.image||"/placeholder.svg",alt:e.author.name||""}),(0,s.jsx)(m.AvatarFallback,{children:e.author.name?.substring(0,2).toUpperCase()||"UN"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n(),{href:`/members/${e.author.id}`,className:"font-semibold hover:underline",children:e.author.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["ADMIN"===e.author.role&&(0,s.jsx)(f,{className:"mr-1 bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:"Admin"}),"MODERATOR"===e.author.role&&(0,s.jsx)(f,{className:"mr-1 bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",children:"Mod"}),"Replied ",(0,c.m)(new Date(e.createdAt),{addSuffix:!0})]})]})]})}),(0,s.jsx)(v.Wu,{children:(0,s.jsx)("div",{className:"prose dark:prose-invert max-w-none",children:e.content.split("\n").map((e,r)=>(0,s.jsx)("p",{children:e},r))})}),(0,s.jsxs)(v.wL,{className:"flex justify-between border-t p-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(u.$,{variant:"ghost",size:"sm",children:"Like"}),(0,s.jsx)(u.$,{variant:"ghost",size:"sm",children:"Quote"})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:e.reactions.length>0&&(0,s.jsxs)("span",{children:[e.reactions.length," likes"]})})]})]},e.id))})]}),r?.user&&!t.locked&&(0,s.jsxs)("div",{children:[(0,s.jsx)(b.Separator,{className:"my-6"}),(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Post a Reply"}),(0,s.jsxs)(v.Zp,{children:[(0,s.jsx)(v.Wu,{className:"p-4",children:(0,s.jsx)("textarea",{className:"w-full min-h-[150px] p-3 border rounded-md",placeholder:"Write your reply here..."})}),(0,s.jsx)(v.wL,{className:"flex justify-end border-t p-4",children:(0,s.jsx)(u.$,{children:"Post Reply"})})]})]}),!r?.user&&(0,s.jsxs)(v.Zp,{className:"p-6 text-center",children:[(0,s.jsx)("p",{className:"mb-4",children:"You need to be signed in to reply to this thread."}),(0,s.jsx)(u.$,{asChild:!0,children:(0,s.jsx)(n(),{href:`/auth/signin?callbackUrl=/forums/thread/${t.id}`,children:"Sign In"})})]}),r?.user&&t.locked&&(0,s.jsx)(v.Zp,{className:"p-6 text-center",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"This thread is locked. No new replies can be posted."})})]})}},22994:(e,r,t)=>{"use strict";t.d(r,{Avatar:()=>a,AvatarFallback:()=>i,AvatarImage:()=>n});var s=t(46760);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call Avatar() from the server but Avatar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\nodejs-apps\\community-forum\\components\\ui\\avatar.tsx","Avatar"),n=(0,s.registerClientReference)(function(){throw Error("Attempted to call AvatarImage() from the server but AvatarImage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\nodejs-apps\\community-forum\\components\\ui\\avatar.tsx","AvatarImage"),i=(0,s.registerClientReference)(function(){throw Error("Attempted to call AvatarFallback() from the server but AvatarFallback is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\nodejs-apps\\community-forum\\components\\ui\\avatar.tsx","AvatarFallback")},11844:(e,r,t)=>{"use strict";t.d(r,{Separator:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call Separator() from the server but Separator is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\nodejs-apps\\community-forum\\components\\ui\\separator.tsx","Separator")},19626:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});let s=(0,t(83238).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,423,512,103,85,272,45,908],()=>t(41942));module.exports=s})();