"use strict";exports.id=908,exports.ids=[908],exports.modules={38537:(e,r,d)=>{d.d(r,{$:()=>c});var o=d(62740),t=d(76301),a=d(15225),i=d(67699),s=d(55946);let n=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef(({className:e,variant:r,size:d,asChild:t=!1,...i},c)=>{let l=t?a.DX:"button";return(0,o.jsx)(l,{className:(0,s.cn)(n({variant:r,size:d,className:e})),ref:c,...i})});c.displayName="Button"},19935:(e,r,d)=>{d.d(r,{BT:()=>c,Wu:()=>l,ZB:()=>n,Zp:()=>i,aR:()=>s,wL:()=>u});var o=d(62740),t=d(76301),a=d(55946);let i=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));i.displayName="Card";let s=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));s.displayName="CardHeader";let n=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));n.displayName="CardTitle";let c=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));c.displayName="CardDescription";let l=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("p-6 pt-0",e),...r}));l.displayName="CardContent";let u=t.forwardRef(({className:e,...r},d)=>(0,o.jsx)("div",{ref:d,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},45369:(e,r,d)=>{d.d(r,{N:()=>c,j:()=>l});var o=d(46814),t=d(34926),a=d(51825),i=d(91642),s=d(64912),n=d(11587);let c={adapter:(0,o.y)(n.z),pages:{signIn:"/auth/signin",signOut:"/auth/signout",error:"/auth/error"},session:{strategy:"jwt"},providers:[(0,s.A)({clientId:process.env.DISCORD_CLIENT_ID||"",clientSecret:process.env.DISCORD_CLIENT_SECRET||"",authorization:{params:{scope:"identify email"}},callbackUrl:"http://198.154.99.127:3000/auth/discord/callback",profile:e=>(console.log("Discord profile received:",e),{id:e.id,name:e.username,email:e.email,image:e.avatar?`https://cdn.discordapp.com/avatars/${e.id}/${e.avatar}.png`:null})}),(0,i.A)({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;let r=await n.z.user.findUnique({where:{email:e.email}});return r&&r.password&&await (0,t.UD)(e.password,r.password)?{id:r.id,email:r.email,name:r.name,image:r.image,role:r.role}:null}})],callbacks:{async signIn({user:e,account:r,profile:d}){if(r?.provider==="discord"&&d)try{console.log("Discord sign-in for user ID:",e.id),await n.z.user.update({where:{id:Number.parseInt(e.id,10)},data:{discordId:d.id,department:"N_A"}}),console.log("Updated user with Discord ID from profile:",d.id),setTimeout(async()=>{try{let r=await n.z.account.findFirst({where:{provider:"discord",userId:Number.parseInt(e.id,10)}});r&&(console.log("Found Discord account in accounts table:",r.providerAccountId),await n.z.user.update({where:{id:Number.parseInt(e.id,10)},data:{discordId:r.providerAccountId}}),console.log("Updated user with Discord ID from accounts table"))}catch(e){console.error("Error in delayed Discord ID update:",e)}},2e3)}catch(e){console.error("Error updating Discord ID during sign-in:",e)}return!0},async session({session:e,token:r}){if(e.user&&r.sub){e.user.id=r.sub,e.user.role=r.role,r.discordId&&(e.user.discordId=r.discordId);try{let d=Number.parseInt(r.sub,10),o=await n.z.user.findUnique({where:{id:d},select:{discordId:!0,department:!0,role:!0}});if(o&&(o.discordId&&(e.user.discordId=o.discordId),e.user.department=o.department,e.user.role=o.role,console.log("Session updated with user data:",{discordId:o.discordId,department:o.department,role:o.role}),!o.discordId)){let r=await n.z.account.findFirst({where:{provider:"discord",userId:d}});r&&(console.log("Found Discord account but user doesn't have Discord ID. Updating..."),await n.z.user.update({where:{id:d},data:{discordId:r.providerAccountId}}),e.user.discordId=r.providerAccountId,console.log("Updated user and session with Discord ID from accounts table"))}}catch(e){console.error("Error fetching user data for session:",e)}}return e},jwt:async({token:e,user:r,account:d,profile:o})=>(d&&r&&("discord"===d.provider&&o&&(e.discordId=o.id,console.log("Added Discord ID to JWT token:",o.id)),e.role=r.role),e)},events:{async createUser(e){let{user:r}=e;if(console.log("New user created:",r.id,r.email),r.email)try{setTimeout(async()=>{try{let e=await n.z.account.findFirst({where:{userId:r.id,provider:"discord"}});e&&(console.log("Found Discord account for new user:",e.providerAccountId),await n.z.user.update({where:{id:r.id},data:{discordId:e.providerAccountId,department:"N_A",role:"APPLICANT"}}),console.log("Updated new user with Discord ID and set as APPLICANT"))}catch(e){console.error("Error in delayed createUser processing:",e)}},2e3)}catch(e){console.error("Error in createUser event:",e)}},async linkAccount({user:e,account:r,profile:d}){if("discord"===r.provider&&d){console.log("Account linked:",e.id,r.provider,r.providerAccountId);try{await n.z.user.update({where:{id:e.id},data:{discordId:r.providerAccountId}}),console.log("Updated user with Discord ID from linkAccount event")}catch(e){console.error("Error updating Discord ID in linkAccount event:",e)}}}}};async function l(){return await (0,a.getServerSession)(c)}},11587:(e,r,d)=>{d.d(r,{z:()=>t});var o=d(96330);let t=globalThis.prisma??new o.PrismaClient},55946:(e,r,d)=>{d.d(r,{cn:()=>a});var o=d(13673),t=d(47317);function a(...e){return(0,t.QP)((0,o.$)(e))}},83238:(e,r,d)=>{d.d(r,{A:()=>n});var o=d(76301);let t=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=(...e)=>e.filter((e,r,d)=>!!e&&""!==e.trim()&&d.indexOf(e)===r).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,o.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:d=2,absoluteStrokeWidth:t,className:s="",children:n,iconNode:c,...l},u)=>(0,o.createElement)("svg",{ref:u,...i,width:r,height:r,stroke:e,strokeWidth:t?24*Number(d)/Number(r):d,className:a("lucide",s),...l},[...c.map(([e,r])=>(0,o.createElement)(e,r)),...Array.isArray(n)?n:[n]])),n=(e,r)=>{let d=(0,o.forwardRef)(({className:d,...i},n)=>(0,o.createElement)(s,{ref:n,iconNode:r,className:a(`lucide-${t(e)}`,d),...i}));return d.displayName=`${e}`,d}},12503:(e,r,d)=>{d.d(r,{A:()=>o});let o=(0,d(83238).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},82520:(e,r,d)=>{d.d(r,{A:()=>o});let o=(0,d(83238).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])}};